(function(t){function e(e){for(var n,r,o=e[0],u=e[1],c=e[2],l=0,h=[];l<o.length;l++)r=o[l],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&h.push(i[r][0]),i[r]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);_&&_(e);while(h.length)h.shift()();return a.push.apply(a,c||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],n=!0,o=1;o<s.length;o++){var u=s[o];0!==i[u]&&(n=!1)}n&&(a.splice(e--,1),t=r(r.s=s[0]))}return t}var n={},i={index:0},a=[];function r(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=n,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(s,n,function(e){return t[e]}.bind(null,n));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var _=u;a.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var n=s("85ec"),i=s.n(n);i.a},"56d7":function(t,e,s){"use strict";s.r(e);s("e623"),s("e379"),s("5dc8"),s("37e1");var n=s("2b0e"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[t._m(0),s("nav",[s("div",{staticClass:"nav nav-pills nav-fill",attrs:{id:"nav-tab",role:"tablist"}},[s("a",{staticClass:"nav-item nav-link",class:{active:"overview"===t.active_tab},on:{click:function(e){return t.switch_tab("overview")}}},[t._v("Overview")]),s("a",{staticClass:"nav-item nav-link",class:{active:"working"===t.active_tab},on:{click:function(e){return t.switch_tab("working")}}},[t._v("Working Area")])])]),"overview"===t.active_tab?s("div",[s("overview"),t._m(1)],1):t._e(),t.show_tab_working?s("div",[s("div",{staticClass:"card mb-4"},[t._m(2),s("div",{staticClass:"card-body"},[s("div",{staticClass:"container"},[t._m(3),s("div",{staticClass:"card-body"}),s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-6",staticStyle:{"z-index":"0"}},[s("div",{staticClass:"card sticky-top"},[s("div",{staticClass:"card-header"},[s("h4",{staticStyle:{"text-align":"center"}},[s("button",{staticClass:"btn btn-secondary",staticStyle:{float:"left"},attrs:{type:"button","data-balloon-pos":"up","data-balloon-length":"large","aria-label":"You can move back and forth without losing your annotations. However, do not refresh this page using the refresh button of your browser."},on:{click:t.previous_passage}},[s("i",{staticClass:"fas fa-chevron-left"})]),s("span",{staticStyle:{margin:"0 auto",display:"inline-block"}},[t._v(" Passage: "+t._s(t.staging.passage_id+1)+" / "+t._s(t.number_of_passages)+" ")]),s("button",{staticClass:"btn btn-secondary",staticStyle:{float:"right"},attrs:{type:"button","data-balloon-pos":"up","data-balloon-length":"large","aria-label":"You don't need to use all passages if you can get enough good questions from some of them. If you do use more than one passage, please ask a similar number of questions per passage."},on:{click:t.next_passage}},[s("i",{staticClass:"fas fa-chevron-right"})])])]),t.staging.showing_qa_panel&&null!==t.staging.current_question.text&&void 0!==t.staging.current_question.text&&""!==t.staging.current_question.text?s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[s("p",[s("strong",[s("span",{staticStyle:{color:"DodgerBlue"}},[t._v("[Question] "+t._s(t.staging.current_question.text))])])])])]):t._e(),s("div",{staticClass:"card-body passage-display-box"},[t.data_loaded?s("div",{staticClass:"card-text"},[s("div",[s("div",{staticClass:"passage-text",on:{mouseleave:t.invalidate_selection,mousemove:t.turn_on_event_highlight}},t._l(t.staging.passage,(function(e,n){return s("span",{key:e.index,staticClass:"noselect",class:{highlight:t.should_highlight(n),select_highlight:t.is_in_selection_highlight(n),is_selected_answer:t.is_selected_answer_highlight(n),action_highlight:t.is_selected_action_highlight(n)},on:{mousedown:function(e){return t.mousedown_text(n)},mouseup:function(e){return t.mouseup_text(n)},mouseenter:function(e){return t.mouseenter_text(n)},dblclick:function(e){return t.double_clicked_text(n)}}},[t._v(t._s(e))])})),0),t.data_loaded?t._e():s("div",{staticClass:"spinner-border",attrs:{role:"status"}},[s("span",{staticClass:"sr-only"})])])]):t._e()]),s("div",{staticClass:"card"},[s("br"),s("div",{staticClass:"row mb-4"},[s("div",{staticClass:"col text-center"},[s("button",{staticClass:"btn btn-primary",class:{"btn-dark":!t.should_submit_enable,"btn-warning":t.should_submit_enable&&!t.questions_modified_satisfied,"btn-success":t.should_submit_enable},attrs:{id:"ready_submit",type:"button",disabled:!t.should_submit_enable},on:{click:t.check_before_submit}},[t._v(" "+t._s(t.submit_button_text)+" "),s("span",{staticClass:"button-question-tooltip",attrs:{"data-balloon-pos":"down","data-balloon-length":"large","aria-label":"When this button is yellow, you can still submit, but it's not suggested if you do this very often."}},[t._v(" ? ")])])])]),t.has_submission_error?s("div",{staticClass:"alert alert-danger fade show",attrs:{role:"alert"}},[s("strong",[t._v(t._s(t.submission_error_msg))])]):t._e(),s("div",{staticClass:"row justify-content-center"},[s("form",{class:{hidden:t.submission_not_ready},attrs:{name:"mturk_form",method:"post",id:"mturk-external-submit-form",action:t.mturk_params.turkSubmitTo}},[s("input",{attrs:{type:"hidden",name:"assignmentId",id:"assignmentId"},domProps:{value:t.mturk_params.assignmentId}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.generated_answers,expression:"generated_answers"}],attrs:{id:"generated_answers",name:"generated_answers",type:"hidden"},domProps:{value:t.generated_answers},on:{input:function(e){e.target.composing||(t.generated_answers=e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.generated_answers_event,expression:"generated_answers_event"}],attrs:{id:"generated_answers_event",name:"generated_answers_event",type:"hidden"},domProps:{value:t.generated_answers_event},on:{input:function(e){e.target.composing||(t.generated_answers_event=e.target.value)}}})])])])])]),s("div",{staticClass:"col-lg-6"},[s("div",{staticClass:"card mb-2"},[t._m(4),s("div",{staticClass:"card-body"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[this.staging.showing_qa_panel?t._e():s("div",[s("div",{staticClass:"input-group mb-3"},[s("input",{staticClass:"form-control",attrs:{type:"text",placeholder:"Event action not selected","aria-label":"Recipient's username","aria-describedby":"basic-addon2",disabled:""},domProps:{value:t.display_selected_text}})]),t.has_event_error?s("div",{staticClass:"alert alert-danger fade show",attrs:{role:"alert"}},[s("strong",[t._v(t._s(t.event_selection_error_message))])]):t._e(),s("div",{staticClass:"input-group mb-3"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.add_action}},[t._v("Select Action "),s("span",{staticClass:"button-question-tooltip",attrs:{"data-balloon-pos":"down","data-balloon-length":"large","aria-label":"Click to highlight your selected answer in text."}},[t._v(" ? ")])])])])])]),s("div",{staticClass:"row mt-4"},[s("div",{staticClass:"col"},[t._l(t.sorted_event_actions,(function(e,n){return s("action-card",{key:n,attrs:{event:e,is_editing:t.is_editing_action(e),is_selecting:t.is_selecting_event(e)},on:{edit:function(s){return t.edit_action(e)},delete:function(s){return t.delete_action(e)}}})})),s("br"),s("div",{staticClass:"input-group mb-3"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:0==this.current.action_created},on:{click:t.switch_stage}},[t._v(" "+t._s(this.finish_event_selection_text)+" "),s("span",{staticClass:"button-question-tooltip",attrs:{"data-balloon-pos":"down","data-balloon-length":"large","aria-label":"Click to finish event selection."}},[t._v(" ? ")])])])],2)])])]),s("br"),s("div",{staticClass:"card mb-2"},[t._m(5),s("div",{staticClass:"card-body"},[t._m(6),t.has_qa_error?s("div",{staticClass:"alert alert-danger fade show",attrs:{role:"alert"}},[s("strong",[t._v(t._s(t.qa_error_message))])]):t._e(),t.staging.showing_qa_panel?s("div",{staticClass:"row mt-4"},[s("div",{staticClass:"col"},[t._m(7),s("div",{staticClass:"input-group mb-3"},[s("input",{staticClass:"form-control",attrs:{type:"text",placeholder:"Answer not selected","aria-label":"Recipient's username","aria-describedby":"basic-addon2",disabled:""},domProps:{value:t.display_selected_text}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:t.is_selection_empty},on:{click:t.add_answer}},[t._v(" Add Answer "),s("span",{staticClass:"button-question-tooltip",attrs:{"data-balloon-pos":"down","data-balloon-length":"large","aria-label":"Click to highlight your selected answer in text."}},[t._v(" ? ")])])]),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button","data-balloon-pos":"up","aria-label":"Clear selection"},on:{click:function(e){return t.clear_selection(!1)}}},[s("i",{staticClass:"fas fa-times"})])])]),s("button",{staticClass:"btn btn-primary mt-4",attrs:{type:"button"},on:{click:t.add_or_save_question}},[s("i",{staticClass:"fas fa-save"}),t._v(" "+t._s(t.save_question_button_text)+" "),s("span",{staticClass:"button-question-tooltip",attrs:{"data-balloon-pos":"right","data-balloon-length":"large","aria-label":"Click here to add your input in the above two boxes (i.e., question and answers). We will validate your answers manually. We reserve the right to reject hits from spammers."}},[t._v(" ? ")])]),t._l(t.sorted_staging_answers,(function(e,n){return s("event-card",{key:n,attrs:{value:t.event_text(e)},on:{delete:function(s){return t.delete_answer(e)}}})}))],2)]):t._e(),t._l(t.sorted_questions,(function(e,n){return s("question-card",{key:n,attrs:{question:e,answer_text:t.get_all_answer_surface_form(e),is_editing:t.is_editing(e),show_qa:t.is_showing_qa_panel(e)},on:{delete:function(s){return t.delete_question(e)},edit:function(s){return t.edit_question(e)},derive:function(s){return t.derive_question(e)},pin:function(s){return t.pin_to_top(e)},up:function(s){return t.move_up(e)},down:function(s){return t.move_down(e)}}})}))],2)])])])])])])]):t._e()])},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row mb-4"},[s("div",{staticClass:"col"},[s("h1",{staticClass:"text-center"},[t._v("Event Relation QA: Answer Completeness Validation")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-8"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-header"},[s("h2",[t._v("Your working area")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"card-text"},[s("span",{staticStyle:{color:"DodgerBlue","font-family":"serif"}},[t._v("[STEP 1] ")]),s("span",{staticStyle:{"font-family":"serif"}},[s("strong",[t._v('Click on "Finish Event Selection" below to enter the QA panel. You can come back to highlight more events by clicking on the same button ("Edit Event Selection").')])])]),s("div",{staticClass:"card-text"},[s("span",{staticStyle:{color:"DodgerBlue","font-family":"serif"}},[t._v("[STEP 2] ")]),s("span",{staticStyle:{"font-family":"serif"}},[s("strong",[t._v('Click on the yellow "Edit" button to start review answers.')])])]),s("div",{staticClass:"card-text"},[s("span",{staticStyle:{color:"DodgerBlue","font-family":"serif"}},[t._v("[STEP 3] ")]),s("span",{staticStyle:{"font-family":"serif"}},[s("strong",[t._v('Click on "Add Question & Answer(s)" to finish a review.')])])]),s("br"),s("div",{staticClass:"card-text"},[s("span",{staticStyle:{"font-family":"serif"}},[s("strong",[t._v(" What are some missing answers? ")]),s("ol",[s("li",[s("strong",[t._v("Correct answers may not be highlighted. Be sure to check the entire passage, especially those events located far away from the question event. ")])]),s("li",[s("strong",[t._v("All co-referred events need to be selected if one of them is a correct answer.")])]),s("li",[s("strong",[t._v("Answers can be different depending on QA types. Please review our event and event relation definitions "),s("a",{attrs:{href:"https://eventqa.github.io/",target:"_blank"}},[t._v(" here ")]),t._v(" if you are uncertain. ")])])])])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-header"},[s("h4",[s("span",{staticStyle:{color:"blue"}},[t._v(" Event Action Selection ")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-header"},[s("h4",[s("span",{staticStyle:{color:"blue"}},[t._v(" Event Relation QA ")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h6",[t._v('*All* answers must include event actions. Click on "Edit Event Selection" above to add more event action words.')])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("small",[t._v(" To select answers, drag your mouse over the text span. Be careful when you are hitting the right edge of the text box. ")])])}],r=(s("99af"),s("caad6"),s("a15b"),s("d81d"),s("4e82"),s("a9e3"),s("b680"),s("b64b"),s("d3b7"),s("07ac"),s("acd8"),s("e25e"),s("ac1f"),s("25f0"),s("8a79"),s("2532"),s("841c"),s("1276"),s("498a"),s("96cf"),s("1da1")),o=s("2ef0"),u=s.n(o),c=s("cccc"),_=s.n(c),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card mt-2 question-card",class:{border:t.is_editing,"border-danger":t.is_editing,shadow:t.is_editing,"border-warning":this.question.is_default_question,"border-primary":!this.question.is_default_question}},[s("div",{staticClass:"card-body"},[s("p",{staticClass:"card-text small"},[t.is_editing?s("span",[t._v("(Editing...)")]):t._e(),s("span",{staticStyle:{color:"DodgerBlue"}},[s("strong",[t._v("[Question] "+t._s(t.question.text)+" ")])]),s("span",{staticStyle:{color:"rgb(218, 165, 32)"}},[t._v(" [Type] "+t._s(t.question.type)+" ")]),s("span",{staticStyle:{color:"red"}},[t._v("[Answer] ")]),s("span",{staticStyle:{color:"red","font-style":"italic","border-bottom":"thick solid rgb(0, 0, 255)"}},[t._v(t._s(t.answers_text_or_not_answered))])]),s("div",{staticClass:"btn-group btn-group-sm",attrs:{role:"group","aria-label":"move up and down"}}),t.show_answer_default_button?s("button",{staticClass:"btn btn-danger btn-sm mr-2 tooltip-big-text",on:{click:t.onEdit}},[t._v(" Answer this event question "),s("span",{staticClass:"button-question-tooltip",attrs:{"data-balloon-pos":"right","data-balloon-length":"large","aria-label":"You need to answer this question before submitting your HIT. Press here and start working on it in the boxes above. Remember to answer from the time point when the passage was written"}},[t._v(" ? ")])]):t._e(),t.show_edit_button?s("button",{staticClass:"btn btn-warning btn-sm mr-2 tooltip-big-text",attrs:{"data-toggle":"tooltip","data-balloon-pos":t.edit_button_tooltip_loc,"aria-label":t.edit_button_tooltip_text},on:{click:t.onEdit}},[s("i",{staticClass:"fas fa-edit"})]):t._e()])])},h=[],d={name:"QuestionCard",components:{},props:["question","answer_text","is_editing","show_qa"],mounted:function(){},computed:{answers_text_or_not_answered:function(){return this.question.is_default_question?this.question.is_answered?this.answer_text:"(Not answered yet; if there's no answer, press the red button below and save an empty answer)":this.answer_text},show_edit_button:function(){return!this.is_editing&&(!!this.show_qa&&(!this.question.is_default_question||this.question.is_default_question&&this.question.is_answered))},show_derive_button:function(){return!this.is_editing&&!this.question.is_default_question},show_answer_default_button:function(){return this.question.is_default_question&&!this.question.is_answered&&!this.is_editing},show_delete_button:function(){return!this.is_editing&&(!!this.show_qa&&!this.question.is_default_question)},edit_button_tooltip_loc:function(){return this.question.is_default_question?"right":"down"},edit_button_tooltip_text:function(){var t="This button is to edit this question and overwrite it.";return this.question.is_default_question&&(t+=" This is a default question and you cannot delete it."),t}},methods:{onDelete:function(){this.$emit("delete")},onEdit:function(){this.$emit("edit")},onDerive:function(){this.$emit("derive")},onPin:function(){this.$emit("pin")},onUp:function(){this.$emit("up")},onDown:function(){this.$emit("down")}}},g=d,f=s("2877"),v=Object(f["a"])(g,l,h,!1,null,null,null),p=v.exports,m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[s("p",{staticClass:"card-text"},[t._v(" "+t._s(t.value)+" "),s("a",{staticClass:"card-link text-danger",staticStyle:{cursor:"pointer"},on:{click:t.onDelete}},[s("i",{staticClass:"fas fa-trash-alt"})])])])])},w=[],b={name:"EventCard",props:["value"],computed:{},methods:{onDelete:function(){this.$emit("delete")}}},q=b,y=Object(f["a"])(q,m,w,!1,null,null,null),k=y.exports,x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card mt-2 event-card",class:{border:t.is_editing,"border-danger":t.is_editing,shadow:t.is_editing,"border-primary":!0}},[s("div",{staticClass:"card-body"},[s("p",{staticClass:"card-text small"},[t.is_editing?s("span",[t._v("(Editing...)")]):t._e(),s("span",{staticStyle:{color:"DodgerBlue","padding-right":"10px"}},[s("strong",[t._v(" [Event Action] "+t._s(t.event.text)+" ")])])]),t.show_edit_button?s("button",{staticClass:"btn btn-warning btn-sm mr-2 tooltip-big-text",attrs:{"data-toggle":"tooltip","data-balloon-pos":t.edit_button_tooltip_loc,"aria-label":t.edit_button_tooltip_text},on:{click:t.onEdit}},[s("i",{staticClass:"fas fa-edit"})]):t._e(),t.show_delete_button?s("button",{staticClass:"btn btn-danger btn-sm",on:{click:t.onDelete}},[s("i",{staticClass:"fas fa-trash-alt"})]):t._e()])])},C=[],S={name:"EventCard",components:{},props:["event","is_editing","is_selecting"],computed:{show_edit_button:function(){return!(this.is_editing||!this.is_selecting)},show_delete_button:function(){return!(this.is_editing||!this.is_selecting)},edit_button_tooltip_text:function(){var t="This button is to edit this event action.";return t},edit_button_tooltip_loc:function(){return"right"}},mounted:function(){},methods:{onDelete:function(){this.$emit("delete")},onEdit:function(){this.$emit("edit")},onPin:function(){this.$emit("pin")},onUp:function(){this.$emit("up")},onDown:function(){this.$emit("down")}}},E=S,T=Object(f["a"])(E,x,C,!1,null,null,null),A=T.exports,j=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},I=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"row mb-4 mt-4"},[s("div",{staticClass:"col"},[s("div",{staticClass:"card"},[s("div",{staticClass:"collapse show"},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"card-text",staticStyle:{"text-align":"left"}},[s("strong",[t._v("Hello! You did well in the main tasks of our "),s("a",{attrs:{href:"https://eventqa.github.io/",target:"_blank"}},[t._v("Event Relation QA")]),t._v(" project, and therefore were selected to participate in the validation tasks.")]),s("br"),s("br"),s("strong",[t._v("In this task, you need to validate the QAs provided by other participants. More specifically, a passage, a question and candidate answers are provided, and you need to, ")]),s("ol",[s("li",[s("span",{staticStyle:{color:"Tomato"}},[t._v("determine if the provided answers are complete; if incomplete, fix them by adding answers.")])]),s("li",[s("span",{staticStyle:{color:"Tomato"}},[t._v("to add answers, you may need to highlight event action words that are not yet selected. ")])])]),s("strong",[t._v("You will notice in the next tab that this task is failrly similar to the main tasks you worked on. Therefore, please make sure to review the definitions of "),s("mark",[s("i",[t._v("significant events")])]),t._v(" and "),s("mark",[s("i",[t._v("5 types of event relations")])]),t._v(" "),s("a",{attrs:{href:"https://eventqa.github.io/",target:"_blank"}},[t._v("here")]),t._v(". ")]),t._v(" "),s("br"),s("br"),s("strong",[t._v(" What you DON'T need to do. ")]),s("ol",[s("li",[s("strong",[t._v("You don't need to change QA types.")]),t._v(" They are provided to assist your judgments on answer selections.")]),s("li",[s("strong",[t._v("You don't need to modify questions.")]),t._v(" When you think a question is not valid, simply keep the original answers.")]),s("li",[s("strong",[t._v("You don't need to add new questions.")])])])])])])])])])])}],P={name:"Overview",props:{},data:function(){return{subeventTitle:"Show Sub-event Example",showsubevent:!1,coreferenceTitle:"Show Coreference Example",showcoreference:!1,causalTitle:"Show Causal Example",showccausal:!1,conditionTitle:"Show Conditional Example",showcondition:!1,counterfactualTitle:"Show Counterfactual Example",showcounterfactual:!1}},methods:{toggle_subevent:function(){this.showsubevent?(this.subeventTitle="Show Sub-event Example",this.showsubevent=!1):(this.subeventTitle="Hide",this.showsubevent=!0)},toggle_coreference:function(){this.showcoreference?(this.coreferenceTitle="Show Coreference Example",this.showcoreference=!1):(this.coreferenceTitle="Hide",this.showcoreference=!0)},toggle_causal:function(){this.showcausal?(this.causalTitle="Show Causal Example",this.showcausal=!1):(this.causalTitle="Hide",this.showcausal=!0)},toggle_condition:function(){this.showcondition?(this.conditionTitle="Show Conditional Example",this.condition=!1):(this.conditionTitle="Hide",this.showcondition=!0)},toggle_counterfactual:function(){this.showcounterfactual?(this.counterfactualTitle="Show Counterfactual Example",this.showcounterfactual=!1):(this.counterfactualTitle="Hide",this.showcounterfactual=!0)}}},O=P,M=Object(f["a"])(O,j,I,!1,null,null,null),B=M.exports,R=s("72bf"),$=s.n(R),D=[],Y=[],N=[],Q=1,W=3,F={name:"AnnotationInterface",components:{"question-card":p,"event-card":k,"action-card":A,overview:B},data:function(){return{active_tab:"overview",frozen:!0,frozen_time:3,seconds_remain:60,required_question_count:W,number_of_passages:Q,max_bonus:5,pay_base_amount:5,bonus_per_question:.5,finish_event_selection_text:"Finish Event Selection",data_loaded:!1,annotations:{},current:{selection_state:"none",selection:{start:-1,end:-1,current:-1},selected_char_indices:{},selected_char_indices_for_answers:{},selected_char_indices_for_action:{},question_id_counter:0,action_id_counter:0,question_created:0,action_created:0,question_modified:0,default_question_count:0,default_question_answered_count:0},staging:{pinned_question_id:null,showing_qa_panel:!0,showing_qa_work_area:!1,passage_id:-1,passage:"",has_action:!1,current_action:{_position:null,action_id:null,text:"",span:""},current_question:{_position:null,question_id:null,text:"",type:"",is_default_question:!1,answers:{},include_event:""},events:{},actions:{},questions:{}},feedback:"",question_order_counter:0,action_order_counter:0,event_selection_error_message:"",has_event_error:!1,qa_error_message:"",has_qa_error:!1,submission_error_msg:"",has_submission_error:!1,submission_not_ready:!0,generated_answers:"",generated_answers_event:"",mturk_params:{assignmentId:"",hitId:"",turkSubmitTo:"",workerId:"",isPreview:!0}}},mounted:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,s,n,i,a,r,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=$.a.parse(location.search),s=e.assignmentId,"ASSIGNMENT_ID_NOT_AVAILABLE"===s&&(console.log("Preview mode."),this.mturk_params.isPreview=!0),n=e.hitId,i=e.turkSubmitTo,a=e.workerId,this.mturk_params.turkSubmitTo=i+"/mturk/externalSubmit",this.mturk_params.workerId=a,this.mturk_params.hitId=n,this.mturk_params.assignmentId=s,this.pay_base_amount="basePay"in e?parseFloat(e.basePay):0,this.required_question_count="requiredQuestion"in e?parseInt(e.requiredQuestion):0,this.number_of_passages="numPassage"in e?parseInt(e.numPassage):2,this.max_bonus="maxBonus"in e?parseFloat(e.maxBonus):0,this.bonus_per_question="bonusPerQuestion"in e?parseFloat(e.bonusPerQuestion):0,r=this,t.next=18,_.a.fetchPassagesWithRetries(1,this.number_of_passages);case 18:o=t.sent,console.log("fetch-data success!",o),this.number_of_passages=o.length,u.a.each(o,(function(t,e){var s=t.passage_id;r.annotations[e]={passage:t.passage,doc_id:t.doc_id,sent_id:t.sent_id,events:t.events,actions:t.actions,questions:t.questions,passage_id:s}})),this.data_loaded=!0,this.stage_new_passage(0),c=setInterval((function(){r.seconds_remain-=1,r.seconds_remain<0&&(r.frozen=!1,clearInterval(c))}),1e3);case 25:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),computed:{sorted_questions:function(){var t=this;return u.a.orderBy(this.staging.questions,(function(e){return e.question_id===t.staging.pinned_question_id?-99999:e._position}))},sorted_event_actions:function(){return u.a.orderBy(this.staging.actions,(function(t){return t._position}))},sorted_staging_events:function(){var t=u.a.sortBy(Object.values(this.staging.events),[function(t){return t.start},function(t){return t.end}]);return t},sorted_staging_answers:function(){var t=u.a.sortBy(Object.values(this.staging.current_question.answers),[function(t){return t.start},function(t){return t.end}]);return t},event_selection_button_text:function(){return this.staging.showing_qa_panel?"Edit Event Selection":"Finish Selection"},event_selection_button_tooltip_text:function(){return this.staging.showing_qa_panel?"Click to add/delete your event selections.":"Click to highlight your event selections in text and then you can ask questions on the right panel."},save_question_button_text:function(){return null!==this.staging.current_question.question_id?"Save Question & Answer(s)":"Add Question & Answer(s)"},should_submit_enable:function(){return!this.frozen&&(this.current.default_question_answered_count>=this.current.default_question_count&&this.current.question_created>=this.required_question_count)},next_passage_disabled:function(){return!1},prev_passage_disabled:function(){return!1},pay_bonus_amount:function(){var t=Math.max(0,this.bonus_per_question*(this.current.question_created-this.required_question_count));return Math.min(t,this.max_bonus)},pay_total_amount:function(){return this.pay_bonus_amount+this.pay_base_amount},display_selected_text:function(){if(this.current.selection.start>=0&&this.current.selection.end>=0){var t=this.staging.passage.substring(this.current.selection.start,this.current.selection.end+1);return t.length>20?t.substring(0,19)+" ...":t}return""},is_selection_empty:function(){return-1===this.current.selection.start||-1===this.current.selection.end},show_tab_instruction:function(){return"instruction"===this.active_tab},show_tab_working:function(){return"working"===this.active_tab},submit_button_text:function(){return this.frozen?"Submit (enables in "+this.seconds_remain+" seconds)":"Submit Response on All Passages"},suggested_modified_question_count:function(){return Math.ceil(this.required_question_count/3)},questions_created_satisfied:function(){return this.current.question_created>=this.required_question_count},questions_warmup_satisfied:function(){return this.current.default_question_answered_count>=this.current.default_question_count},questions_modified_satisfied:function(){return this.current.question_modified>=this.suggested_modified_question_count}},methods:{switch_tab:function(t){this.active_tab=t},focus_nav_tab:function(){document.getElementById("nav-tab").scrollIntoView()},hide_event_error:function(){this.has_event_error=!1},hide_qa_error:function(){this.has_qa_error=!1},hide_submission_error:function(){this.has_submission_error=!1},show_event_error:function(t){this.event_selection_error_message=t,this.has_event_error=!0},show_qa_error:function(t){this.qa_error_message=t,this.has_qa_error=!0},show_submission_error:function(t){this.submission_error_msg=t,this.has_submission_error=!0},reset_highlight_map:function(){for(var t=0;t<this.staging.passage.length;t++)n["a"].set(this.current.selected_char_indices,t,!1),n["a"].set(this.current.selected_char_indices_for_answers,t,!1),n["a"].set(this.current.selected_char_indices_for_action,t,!1)},event_text:function(t){return this.staging.passage.substring(t.start,t.end+1)},is_event_text_single_token:function(t){var e=t.start,s=t.end;return!this.staging.passage.substring(e,s+1).trim().includes(" ")},switch_stage:function(){var t=Object.keys(this.staging.actions);if(this.staging.showing_qa_panel){this.staging.showing_qa_panel=!1;for(var e=0;e<t.length;e++){var s=t[e];this.staging.actions[s].is_selecting=!0}this.do_highlight_all_event_selection(),this.finish_event_selection_text="Finish Event Selection"}else{this.staging.showing_qa_panel=!0;for(var i=0;i<t.length;i++){var a=t[i];this.staging.actions[a].is_selecting=!1}for(var r=0;r<=this.staging.passage.length;r++)n["a"].set(this.current.selected_char_indices,r,!1);this.finish_event_selection_text="Edit Event Selection"}for(var o=Object.keys(this.staging.questions),u=0;u<o.length;u++){var c=o[u];this.staging.questions[c].show_qa=this.staging.showing_qa_panel}},can_add_event:function(){var t=this.current.selection.start,e=this.current.selection.end,s=this.staging.passage.substring(t,e+1).trim();return 0===s.length?(this.show_event_error("The is event empty."),!1):this.is_event_text_single_token()?(this.hide_event_error(),!0):(this.show_event_error("The correct event should be a single word"),!1)},can_add_action:function(t){var e=t.start,s=t.end,n=this.staging.passage.substring(e,s+1).trim();return 0===n.length?(this.show_event_error("The is event empty!"),!1):1===n.length?(this.show_event_error("The correct event action should be a single word!"),!1):this.is_event_text_single_token(t)?this.is_action_duplicated(t)?(this.show_event_error("This answer is duplicated!"),!1):(this.hide_event_error(),!0):(this.show_event_error("The correct event action should be a single word!"),!1)},is_action_duplicated:function(t){if(this.staging.current_action.start==t.start&&this.staging.current_action.end==t.end)return!1;for(var e=Object.keys(this.staging.actions),s=0;s<e.length;s++)for(var n=this.staging.actions[e[s]].start,i=this.staging.actions[e[s]].end,a=n;a<=i;a++)if(a>=t.start&&a<=t.end)return!0;return!1},is_answer_duplicated:function(t){for(var e=Object.keys(this.staging.current_question.answers),s=0;s<e.length;s++)for(var n=this.staging.current_question.answers[e[s]].start,i=this.staging.current_question.answers[e[s]].end,a=n;a<=i;a++)if(a>=t.start&&a<=t.end)return!0;return!1},is_from_event_list:function(t){for(var e=0;e<this.staging.events.length;e++){var s=Number(this.staging.events[e].start),n=Number(this.staging.events[e].end);if(t.start==s&&t.end==n)return!0}return!1},trim_start_end_to_nearest_space:function(){var t=this.current.selection.start,e=this.current.selection.end;if(-1!==t&&-1!==e){for(var s=t,n=e,i=t;i<=e;i++)if(" "!==this.staging.passage.charAt(i)){s=i;break}for(var a=e;a>=t;a--)if(" "!==this.staging.passage.charAt(a)){n=a;break}this.current.selection.start=s,this.current.selection.end=n}},add_event:function(){this.trim_start_end_to_nearest_space();var t=this.current.selection.start,e=this.current.selection.end,s=t+"_"+e,i={start:t,end:e,key:s};if(!this.can_add_event(i))return!1;var a=Object.keys(this.staging.events).length;n["a"].set(this.staging.events,s,i),this.current.selection.start=-1,this.current.selection.end=-1,this.current.selection.current=-1,this.current.selection.state="none";var r=Object.keys(this.staging.events).length,o=r>a;return o&&1===r&&this.add_default_questions_to_passage(),!0},add_default_questions_to_passage:function(){var t=this.staging.passage_id,e={question_id:t+"-question-d0",is_default_question:!0,question_is_derived_from:null,is_answered:!1,answers:{},text:"What is the subject of this event?",_position:this.get_new_question_order_counter()},s={question_id:t+"-question-d1",is_default_question:!0,question_is_derived_from:null,is_answered:!1,answers:{},text:"What is the object of this event?",_position:this.get_new_question_order_counter()},i={question_id:t+"-question-d2",is_default_question:!0,question_is_derived_from:null,is_answered:!1,answers:{},text:"Where did (will) this event happen?",_position:this.get_new_question_order_counter()},a={question_id:t+"-question-d3",is_default_question:!0,question_is_derived_from:null,is_answered:!1,answers:{},text:"When did (will) this event happen?",_position:this.get_new_question_order_counter()};n["a"].set(this.staging.questions,t+"-question-d0",e),n["a"].set(this.staging.questions,t+"-question-d1",s),n["a"].set(this.staging.questions,t+"-question-d2",i),n["a"].set(this.staging.questions,t+"-question-d3",a),this.current.default_question_count+=3},delete_event:function(t){this.$delete(this.staging.events,t.key),0===Object.keys(this.staging.events).length&&this.remove_default_questions_in_passage()},remove_default_questions_in_passage:function(){var t=this.staging.passage_id;n["a"].delete(this.staging.questions,t+"-question-d0"),n["a"].delete(this.staging.questions,t+"-question-d1"),n["a"].delete(this.staging.questions,t+"-question-d2"),n["a"].delete(this.staging.questions,t+"-question-d3"),this.current.default_question_count-=3},should_highlight:function(t){return!0===this.current.selected_char_indices[t]},do_highlight_all_event_selection:function(){for(var t in this.staging.events)for(var e=this.staging.events[t],s=e.start;s<=e.end;s++)n["a"].set(this.current.selected_char_indices,s,!0)},do_highlight_all_action_selection:function(){for(var t in this.staging.actions)for(var e=this.staging.actions[t],s=e.start;s<=e.end;s++)n["a"].set(this.current.selected_char_indices_for_action,s,!0)},event_selection_button_clicked:function(){if(this.clear_selection(),this.staging.showing_qa_panel)for(var t=0;t<=this.staging.passage.length;t++)n["a"].set(this.current.selected_char_indices,t,!1);else this.do_highlight_all_event_selection();this.staging.showing_qa_panel=!this.staging.showing_qa_panel},answer_contains_event:function(){for(var t=this.current.selection.start,e=this.current.selection.end,s=Object.keys(this.staging.actions),n=0;n<s.length;n++){var i=s[n];if(t<=this.staging.actions[i].start&&this.staging.actions[i].end<=e)return!0}return!1},can_add_answer:function(t){return-1===t.start||-1===t.end?(this.show_qa_error("The answer cannot be empty!"),!1):0===this.staging.current_question.text.length?(this.show_qa_error("This question is empty"),!1):this.answer_contains_event()?this.is_answer_too_long(t)?(this.show_qa_error("Your answer MUST NOT exceed 12 words. Consider making your answer consise!"),!1):this.is_answer_too_short(t)?(this.show_qa_error("Your answer must not be a single word. Consider selecting a complete meaning span by dragging mouse over the text!"),!1):this.is_answer_duplicated(t)?(this.show_qa_error("This answer overlaps with previous one!"),!1):(this.hide_qa_error(),!0):(this.show_qa_error("Your answer must contain a selected event! If you're sure of your answer, you can modify the highlighted event list by clicking the 'Edit Event Selection' button above!"),!1)},is_action_unique:function(t,e){for(var s in this.staging.actions){var n=this.staging.actions[s].start,i=this.staging.actions[s].end,a=this.staging.passage.substring(n,i+1).toLowerCase();if(t!=s&&e==a)return!1}return!0},answer_overlaps_question:function(t){for(var e in this.staging.actions){var s=this.staging.actions[e].start,n=this.staging.actions[e].end,i=this.staging.passage.substring(s,n+1).toLowerCase();if(t.start<=s&&n<=t.end&&this.is_action_unique(e,i)&&this.staging.current_question.text.toLowerCase().includes(i))return!0}return!1},is_answer_too_long:function(t){var e=t.start,s=t.end,n=this.staging.passage.substring(e,s+1).split(" ");return n.length>12},is_answer_too_short:function(t){var e=t.start,s=t.end,n=this.staging.passage.substring(e,s+1).split(" ");return 1===n.length},add_action:function(){this.trim_start_end_to_nearest_space();var t=this.current.selection.start,e=this.current.selection.end,s={start:t,end:e};if(!this.can_add_action(s))return!1;for(var i=t;i<=e;i++)n["a"].set(this.current.selected_char_indices_for_action,i,!0);var a=null===this.staging.current_action._position?this.get_new_action_order_counter():this.staging.current_action._position,r=this.staging.current_action.action_id;null==r&&(r=this.get_new_action_id()),n["a"].set(this.staging.actions,r,{action_id:r,is_answered:!0,start:t,end:e,text:this.staging.passage.substring(t,e+1),is_selecting:!0,_position:a}),a!=this.staging.current_action._position&&(this.current.action_created=this.current.action_created+1),this.reset_current_action(),this.reset_current_selection()},reset_current_selection:function(){this.current.selection.start=-1,this.current.selection.end=-1,this.current.selection.current=-1,this.current.selection.state="none"},reset_current_action:function(){this.staging.current_action.text="",this.staging.current_action._position=null,this.staging.current_action.action_id=null},add_answer:function(){this.trim_start_end_to_nearest_space();var t=this.current.selection.start,e=this.current.selection.end,s=t+"_"+e,i={start:t,end:e,key:s};if(!this.can_add_answer(i))return!1;if(this.can_add_answer(i)){var a=this.current.selection.start,r=this.current.selection.end,o=a+"_"+r,u={start:a,end:r,key:o};n["a"].set(this.staging.current_question.answers,o,u);for(var c=a;c<=r;c++)n["a"].set(this.current.selected_char_indices_for_answers,c,!0)}else console.log("Cannot add answer.");this.reset_current_selection()},delete_answer:function(t){this.$delete(this.staging.current_question.answers,t.key);for(var e=t.start;e<=t.end;e++)n["a"].set(this.current.selected_char_indices_for_answers,e,!1)},is_selected_answer_highlight:function(t){return!0===this.current.selected_char_indices_for_answers[t]},is_selected_action_highlight:function(t){return!0===this.current.selected_char_indices_for_action[t]},highlight_selected_answer:function(t,e){for(var s=t;s<=e;s++)n["a"].set(this.current.selected_char_indices_for_answers,s,!0)},question_contains_event:function(){var t=this.staging.current_question.text.toLowerCase();for(var e in this.staging.actions){var s=this.staging.actions[e];if(t.includes(s.text))return!0}return!1},is_question_suspicious:function(){var t=this.staging.current_question.text.toLowerCase();for(var e in this.staging.actions){var s=this.staging.actions[e];if(t.includes(s.text.toLowerCase()))return!1}for(var n in N){var i=N[n];if(t.includes(i))return!0}for(var a in Y){var r=Y[a];if(t.includes(r))return!0}for(var o in D){var u=D[o];if(t.includes(u))return!1}return!0},on_question_text_change:function(){this.is_question_suspicious()?this.show_qa_error("This question POSSIBLY doesn't include a highlighted event. You are allowed to use a different form of the selected action word (e.g. teach v.s. taught) or use an imaginary but concrete action word for [Sub-event] question. You can still add this question if you are sure."):this.hide_qa_error()},current_question_is_duplicated:function(){for(var t in this.staging.questions)if(t!==this.staging.current_question.question_id){var e=this.staging.questions[t];if(this.staging.current_question.text===e.text)return!0}return!1},is_showing_qa_panel:function(t){return t.show_qa},can_add_question:function(){return 0===this.staging.current_question.text.length?(this.show_qa_error("This question is empty"),!1):this.current_question_is_duplicated()?(this.show_qa_error("This question is the same as an existing one!"),!1):this.staging.current_question.text.endsWith("?")?"Sub-event"===this.staging.current_question.type&&"yes"!=this.staging.current_question.include_event?(this.show_qa_error(this.staging.current_question.type+" question must contain a complex and concrete event!"),!1):0==Object.keys(this.staging.current_question.answers).length?(this.show_qa_error('You need to select an answer and click "Add Answer"!'),!1):(this.hide_qa_error(),!0):(this.show_qa_error('You may forget to put "?" at the end of the question.'),!1)},get_new_question_id:function(){var t=this.current.question_id_counter;return this.current.question_id_counter=this.current.question_id_counter+1,this.staging.passage_id+"-question-"+t},get_new_action_id:function(){var t=this.current.action_id_counter;return this.current.action_id_counter=this.current.action_id_counter+1,this.staging.passage_id+"-action-"+t},add_or_save_question:function(){if(this.can_add_question()){var t=this.staging.current_question.question_id,e=!1;null===t&&(t=this.get_new_question_id(),e=!0);var s=null===this.staging.current_question._position?this.get_new_question_order_counter():this.staging.current_question._position;this.staging.current_question.is_default_question&&!this.staging.current_question.is_answered&&(this.current.default_question_answered_count=this.current.default_question_answered_count+1),n["a"].set(this.staging.questions,t,{question_id:t,is_default_question:this.staging.current_question.is_default_question,is_answered:!0,show_qa:!0,answers:u.a.cloneDeep(this.staging.current_question.answers),text:this.staging.current_question.text,type:this.staging.current_question.type,include_event:this.staging.current_question.include_event,question_is_derived_from:this.staging.current_question.question_is_derived_from,_position:s}),e&&(this.current.question_created=this.current.question_created+1,null!==this.staging.current_question.question_is_derived_from&&(this.current.question_modified+=1)),this.staging.current_question.text="",this.staging.current_question.type="",this.staging.current_question.include_event="",this.staging.current_question.is_default_question=!1,this.staging.current_question._position=null,this.staging.current_question.question_id=null,this.staging.current_question.question_is_derived_from=null,this.staging.current_question.answers={},this.clear_current_answer_highlight()}else console.log("Cannot add question.")},clear_current_answer_highlight:function(){for(var t=0;t<=this.staging.passage.length;t++)n["a"].set(this.current.selected_char_indices_for_answers,t,!1)},clear_current_action_highlight:function(t){for(var e=t.start;e<=t.end;e++)n["a"].set(this.current.selected_char_indices_for_action,e,!1)},delete_question:function(t){var e=t.question_id;this.$delete(this.staging.questions,e),this.current.question_created=this.current.question_created-1},delete_action:function(t){var e=t.action_id;this.$delete(this.staging.actions,e),this.current.action_created=this.current.action_created-1;for(var s=t.start;s<=t.end;s++)n["a"].set(this.current.selected_char_indices_for_action,s,!1)},derive_question:function(t){this.clear_current_answer_highlight(),this.staging.current_question.question_id=null,this.staging.current_question.text=t.text,this.staging.current_question.is_default_question=t.is_default_question,this.staging.current_question.answers={},this.staging.current_question._position=null,this.staging.current_question.is_answered=t.is_answered,n["a"].nextTick((function(){document.getElementById("question-input").focus()}))},edit_question:function(t){this.clear_current_answer_highlight();var e=t.question_id;for(var s in this.staging.current_question.question_id=e,this.staging.current_question.text=t.text,this.staging.current_question.is_default_question=t.is_default_question,this.staging.current_question.answers=u.a.cloneDeep(t.answers),this.staging.current_question._position=t._position,this.staging.current_question.is_answered=t.is_answered,t.answers){var i=t.answers[s];this.highlight_selected_answer(i.start,i.end)}n["a"].nextTick((function(){document.getElementById("question-input").focus()}))},edit_action:function(t){this.clear_current_action_highlight(t),this.reset_current_action(),this.staging.current_action.action_id=t.action_id,this.staging.current_action.start=t.start,this.staging.current_action.end=t.end},is_selecting_event:function(t){return t.is_selecting},is_editing:function(t){return this.staging.current_question.question_id===t.question_id},is_editing_action:function(t){return this.staging.current_action.action_id===t.action_id},pin_to_top:function(t){for(var e=t._position,s=u.a.map(this.staging.questions,(function(t){return t._position})).sort().reverse(),n=s[0],i={},a=0;a<s.length;a++){var r=s[a];if(r===e){i[r]=n;break}var o=s[a+1];i[r]=o}for(var c in this.staging.questions){var _=this.staging.questions[c];_._position in i&&(_._position=i[_._position])}},move_up:function(t){var e=t._position,s=null,n=null;for(var i in this.staging.questions){var a=this.staging.questions[i],r=a._position;r>e&&(null===s||r<s)&&(s=r,n=a)}null!==s&&(t._position=s,n._position=e)},move_down:function(t){var e=t._position,s=null,n=null;for(var i in this.staging.questions){var a=this.staging.questions[i],r=a._position;r<e&&(null===s||r>s)&&(s=r,n=a)}null!==s&&(t._position=s,n._position=e)},get_all_answer_surface_form:function(t){var e=t.answers;if(0===Object.keys(e).length)return"(The answer is intentionally left empty)";var s=[];for(var n in e){var i=e[n];s.push(this.staging.passage.substring(i.start,i.end+1))}return u.a.join(s,", ")},get_event_span:function(t){return t.span},can_submit_fast_check:function(){if(this.current.question_created<this.required_question_count)return this.show_submission_error("You have created only ".concat(this.current.question_created," questions, which is less than the required ").concat(this.required_question_count,". (Default questions do not count)")),!1;if(this.current.default_question_answered_count<this.current.default_question_count){var t=this.current.default_question_count-this.current.default_question_answered_count;return this.show_submission_error("You have ".concat(t," warm-up questions unanswered, you must answer all of them.")),!1}return!0},create_submission_object:function(){var t=!0,e={},s={feedback:this.feedback,mTurkAssignmentId:this.mturk_params.assignmentId},i=0,a=0;for(var r in this.annotations){var o=this.annotations[r],u=o.passage_id,c=o.passage,_={answer:{spans:[],indices:[]},passageID:u},l=o.actions,h=o.questions;for(var d in h){var g=h[d];g.is_answered||(t=!1),g.is_default_question?g.is_answered&&i++:a++;var f={question:g.text,answer:{spans:[],indices:[]},type:g.type,passageID:u,question_id:g.question_id,isAnswered:g.is_answered,is_default_question:g.is_default_question};for(var v in g.answers){var p=g.answers[v];f.answer.indices.push("(".concat(p.start,",").concat(p.end+1,")")),f.answer.spans.push(c.substring(p.start,p.end+1))}s[d]=f}for(var m in l){var w=l[m];_.answer.indices.push("(".concat(w.start,",").concat(w.end+1,")")),_.answer.spans.push(c.substring(w.start,w.end+1))}var b=r+"-eventAction";e[b]=_}i<12&&console.log("default_question_answered_count : ",i),a<this.required_question_count&&console.log("question_count : ",a),t?(console.log("Passed check, ready to submit now."),this.generated_answers=JSON.stringify(s),this.generated_answers_event=JSON.stringify(e),this.submission_not_ready=!1,this.hide_submission_error(),n["a"].nextTick((function(){document.getElementById("mturk-external-submit-form").submit()})),console.log(this.generated_answers),console.log(this.generated_answers_event)):(console.log("Check not passed."),this.show_submission_error("You may have unanswered questions."))},check_before_submit:function(){console.log(this.annotations),console.log(this.feedback),this.can_submit_fast_check()&&this.create_submission_object()},focus_feedback:function(){document.getElementById("feedback-form").focus()},previous_passage:function(){var t=Object.keys(this.annotations).length,e=(this.staging.passage_id-1+t)%t;e!==this.staging.passage_id&&(this.save_staged_passage(),this.stage_new_passage(e))},next_passage:function(){var t=(this.staging.passage_id+1)%Object.keys(this.annotations).length;t!==this.staging.passage_id&&(this.save_staged_passage(),this.stage_new_passage(t))},stage_new_passage:function(t){this.clear_selection(),this.reset_highlight_map(),this.reset_current_action(),this.staging.passage_id=t;var e=this.annotations[t];this.staging.passage=e.passage,this.staging.questions=e.questions,this.staging.events=e.events,this.staging.showing_qa_panel=!1,this.staging.actions=e.actions,this.finish_event_selection_text="Finish Event Selection",this.current.action_created=Object.keys(this.staging.actions).length,this.do_highlight_all_action_selection()},save_staged_passage:function(){var t=this.annotations[this.staging.passage_id];t.events=this.staging.events,t.actions=this.staging.actions,t.questions=this.staging.questions},mousedown_text:function(t){this.current.selection.start=t,this.current.selection.state="selecting"},mouseup_text:function(t){this.current.selection.end=t,this.current.selection.state="none";var e=Math.min(this.current.selection.start,this.current.selection.end),s=Math.max(this.current.selection.start,this.current.selection.end);this.current.selection.start=e,this.current.selection.end=s},mouseenter_text:function(t){this.current.selection.current=t},invalidate_selection:function(){"none"!==this.current.selection.state&&this.clear_selection(!1)},turn_on_event_highlight:function(){this.staging.showing_qa_panel||this.do_highlight_all_event_selection()},highlight_actions:function(){this.do_highlight_all_event_selection()},is_in_selection_highlight:function(t){return"selecting"===this.current.selection.state?t>=Math.min(this.current.selection.current,this.current.selection.start)&&t<=Math.max(this.current.selection.current,this.current.selection.start):"none"===this.current.selection.state&&(t>=this.current.selection.start&&t<=this.current.selection.end)},all_event_question_answered:function(){for(var t=!0,e=0;e<4;e++){var s=this.staging.passage_id.toString().concat("-question-d").concat(e.toString());this.staging.questions[s].is_answered||(t=!1)}return t},double_clicked_text:function(t){function e(t){return" "===t||"."===t||","===t||"?"===t||"'"===t||'"'===t||"!"===t||";"===t||":"===t||"\n"===t||"\t"===t}for(var s=this.staging.passage.length-1,n=t;n<this.staging.passage.length;n++)if(e(this.staging.passage[n])){s=n-1;break}for(var i=0,a=t;a>0;a--)if(e(this.staging.passage[a])){i=a+1;break}this.current.selection.start=i,this.current.selection.end=s},clear_selection:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.current.selection.state="none",this.current.selection.start=-1,this.current.selection.end=-1,this.current.selection.current=-1,t&&(this.staging.current_question._position=null,this.staging.current_question.answers={},this.staging.current_question.is_default_question=!1,this.staging.current_question.question_id=null,this.staging.current_question.text="")},get_new_question_order_counter:function(){var t=this.question_order_counter;return this.question_order_counter+=1,t},get_new_action_order_counter:function(){var t=this.action_order_counter;return this.action_order_counter+=1,t}},filters:{currency:function(t){return t.toFixed(2)}}},L=F,H=(s("034f"),Object(f["a"])(L,i,a,!1,null,null,null)),J=H.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(J)}}).$mount("#app")},"85ec":function(t,e,s){},cccc:function(t,e,s){s("4e82"),s("b64b"),s("d3b7"),s("e25e"),s("ac1f"),s("1276"),s("96cf");var n=s("c973");function i(t,e){for(var s=[],n=0;n<e.length;n++)s.push(n);s.sort((function(){return.5-Math.random()}));var i=[];t>e.length&&(t=e.length);for(var a=0;a<t;a++){var r=s[a];i.push(e[r])}return i}function a(){var t="Tom falls in love with Becky Thatcher, a new girl in town, and persuades her to get \"engaged\" by kissing him. But their romance collapses when she learns Tom has been \"engaged\" previously to Amy Lawrence. Becky cries for a great deal of time until the other students begin to notice, and she becomes embarrassed. Shortly after Becky shuns him, he accompanies Huckleberry Finn to the graveyard at night, where they witness a trio of body snatchers, Dr. Robinson, Muff Potter, and Injun Joe, getting into a fight in which Robinson is murdered by Injun Joe. Tom and Huckleberry Finn swear a blood oath to not tell anyone about the murder, as they feel that if they do, Injun Joe would murder them.\n    Natasha visits the Moscow opera, where she meets Hlne and her brother Anatole. Anatole has since married a Polish woman whom he has abandoned in Poland. He is very attracted to Natasha and determined to seduce her, and conspires with his sister to do so. Anatole succeeds in making Natasha believe he loves her, eventually establishing plans to elope. Natasha writes to Princess Maria, Andrei's sister, breaking off her engagement. At the last moment, Sonya discovers her plans to elope and foils them. Natasha learns from Pierre of Anatole's marriage. Devastated, Natasha makes a suicide attempt and is left seriously ill.\n    Alex is a 15-year-old living in near-future dystopian England who leads his gang on a night of opportunistic, random \"ultra-violence\". Alex's friends (\"droogs\" in the novel's Anglo-Russian slang, 'Nadsat') are Dim, a slow-witted bruiser who is the gang's muscle; Georgie, an ambitious second-in-command; and Pete, who mostly plays along as the droogs indulge their taste for ultra-violence. Characterised as a sociopath and hardened juvenile delinquent, Alex also displays intelligence, quick wit, and a predilection for classical music; he is particularly fond of Beethoven, referred to as \"Lovely Ludwig Van\". The novella begins with the droogs sitting in their favourite hangout, the Korova Milk Bar, and drinking \"milk-plus\"  a beverage consisting of milk laced with the customer's drug of choice  to prepare for a night of mayhem. They assault a scholar walking home from the public library; rob a store, leaving the owner and his wife bloodied and unconscious; beat up a beggar; then scuffle with a rival gang. Joyriding through the countryside in a stolen car, they break into an isolated cottage and terrorise the young couple living there, beating the husband and raping his wife.\n    In March 1997, Maj. Jack Reacher is briefed by his superior Leon Garber on a troubling development in Carter's Crossing, Mississippi: a woman has been found murdered, her throat slit, with signs of rape, and the military is concerned that one of the potential suspects seems to be Cpt. Reed Riley, a commander at Fort Kelham, a nearby Army Ranger base, with a reputation as a ladykiller. Garber informs Reacher that another MP, Maj. Duncan Munro, has been assigned to investigate the murder; his job is to go undercover and ensure that Munro's investigation doesn't damage the military's public image. He also puts Reacher in touch with Col. James John Frazer, a Senate liaison who warns Reacher that Reed's father, Senator Carlton Riley, a member of the Armed Services Committee, is threatening to impose harsh budget cuts on the army if his son is targeted. Posing as a drifter, Reacher takes up residence in a local inn and goes for a meal, where he meets the local sheriff, Elizabeth Deveraux. A former Marine, she quickly deduces Reacher's true identity and purpose, but permits him to stay as long as he doesn't interfere with her investigation. Reacher does so anyway, and learns that the dead woman, Janice Chapman, was the third woman murdered in Carter's Crossing in just the last few months; the other two were young women from the poorer, largely African American section of town. Reacher's old friend Sgt. Frances Neagley arrives with a warning to stay away from Deveraux, who she claims was dishonorably discharged from the service following an incident with a fellow Marine, but Jack disregards her advice.\n    Agnes Grey is the daughter of Mr. Grey, a minister of modest means, and Mrs. Grey, a woman who left her wealthy family and married purely out of love. Mr. Grey tries to increase the family's financial standing, but the merchant he entrusts his money to dies in a wreck, and the lost investment plunges the family into debt. Agnes, her sister Mary, and their mother all try to keep expenses low and bring in extra money, but Agnes is frustrated that everyone treats her like a child. To prove herself and to earn money, she is determined to get a position as a governess. Eventually, she obtains a recommendation from a well-placed acquaintance, is offered a position, and secures her parents' permission. With some misgivings, she travels to Wellwood house to work for the Bloomfield family. The Bloomfields are rich and much crueller than Agnes had expected. Mrs. Bloomfield spoils her children while Mr. Bloomfield constantly finds fault with Agnes's work. The children are unruly and Agnes is held accountable for them despite being given no real authority over them. Tom, the oldest Bloomfield child, is particularly abusive and even tortures small animals. In less than a year, Agnes is relieved of her position, since Mrs. Bloomfield thinks that her children are not learning quickly enough. Agnes returns home.",e=[577,41,363,767,318];return{passage_ids:e,passage_data:t.split("\n")}}function r(){var t=a();return t}function o(t){return u.apply(this,arguments)}function u(){return u=n(regeneratorRuntime.mark((function t(e){var s,n,a,o,u,c,_,l,h,d,g,f,v,p,m,w,b,q,y,k,x,C,S,E,T,A,j,I,P,O,M,B,R,$;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(200===e.status){t.next=3;break}return console.log("Looks like there was a problem. Status Code: "+e.status),t.abrupt("return",r());case 3:return t.next=5,e.json();case 5:for(s=t.sent,n=Object.keys(s),a=i(1,n),console.log("data",a),o=[],u=0;u<a.length;u++)for(l in c=a[u],_=s[c],_.passages){for(g in h=_.passages[l],console.log(h),h["passage_id"]=_.passages[l].question_answer_pairs[0].passageID,d=[],h.events[0].answer.indices)f=h.events[0].answer.indices[g].split(","),v=parseInt(f[0].substring(1)),p=parseInt(f[1].substring(-1)),m=h.events[0].answer.spans[g],w={start:v,end:p,span:m},d.push(w);for(q in b={},h.events[0].answer.indices)y=h.events[0].answer.indices[q].split(","),k=parseInt(y[0].substring(1)),x=parseInt(y[1].substring(-1))-1,C=h.events[0].answer.spans[q],S=h["passage_id"]+"-action-orig-"+q,E={action_id:S,is_answered:!0,start:k,end:x,text:C,is_selecting:!0,_position:q},b[S]=E;for(A in T={},h.question_answer_pairs){for(I in j={},h.question_answer_pairs[A].answer.indices)P=h.question_answer_pairs[A].answer.indices[I].split(","),O=parseInt(P[0].substring(1)),M=parseInt(P[1].substring(-1))-1,B=O+"_"+M,j[B]={start:O,end:M,key:B};R=h["passage_id"]+"-question-orig-"+A,$={question_id:R,is_default_question:!1,is_answered:!0,show_qa:!1,text:h.question_answer_pairs[A].question,type:h.question_answer_pairs[A].type,include_event:!0,_position:A,answers:j},T[R]=$}h["events"]=d,h["actions"]=b,h["questions"]=T,o.push(h)}return t.abrupt("return",o);case 12:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)}function c(t,e){return _.apply(this,arguments)}function _(){return _=n(regeneratorRuntime.mark((function t(e,s){var n,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n="https://eventqa.s3.us-east-2.amazonaws.com/train_to_validate/"+s+".json",console.log(s),i=0;case 3:if(!(i<e)){t.next=19;break}return t.prev=4,t.next=7,fetch(n);case 7:return r=t.sent,t.next=10,o(r);case 10:return t.abrupt("return",t.sent);case 13:t.prev=13,t.t0=t["catch"](4),console.log(t.t0);case 16:i++,t.next=3;break;case 19:return t.abrupt("return",a());case 20:case"end":return t.stop()}}),t,null,[[4,13]])}))),_.apply(this,arguments)}t.exports={parsePassages:o,chooseKfromArray:i,fetchPassagesWithRetries:c}}});
//# sourceMappingURL=index.9bff2c72.js.map